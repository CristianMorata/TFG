<!-- cocina.component.html -->
<div class="min-h-screen bg-gradient-to-br from-yellow-50 via-pink-50 to-blue-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 py-8 px-2">
  <div class="max-w-3xl mx-auto">
    <h1 class="text-3xl font-bold mb-8 text-center text-pink-700 dark:text-pink-300 flex items-center justify-center gap-2 drop-shadow">
      <svg class="w-8 h-8 text-pink-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 10h16M4 14h16M4 18h16" />
      </svg>
      Cocina - Platos en preparaci√≥n
    </h1>

    <div *ngIf="cargando" class="flex justify-center items-center py-12">
      <svg class="animate-spin h-8 w-8 text-pink-500 mr-2" viewBox="0 0 24 24">
        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" fill="none"/>
        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v8z"/>
      </svg>
      <span class="text-pink-700 dark:text-pink-200 text-lg">Cargando platos...</span>
    </div>

    <div *ngIf="error" class="bg-red-100 border border-red-300 text-red-700 rounded-lg p-4 mb-6 text-center">
      {{ error }}
    </div>

    <div *ngIf="!cargando && !error && mesasConComida.length === 0" class="text-center py-10 text-gray-500 dark:text-gray-400 text-lg">
      <svg class="mx-auto mb-2 w-10 h-10 text-gray-300 dark:text-gray-600" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 10h16M4 14h16M4 18h16" />
      </svg>
      No hay platos de comida pendientes.
    </div>

    <ng-container *ngFor="let mesa of mesasConComida">
      <section class="mb-8 p-6 border-2 border-pink-200 dark:border-pink-800 rounded-2xl bg-white/80 dark:bg-gray-800/80 shadow-lg transition-all">
        <div class="flex items-center justify-between mb-4">
          <h3 class="text-xl font-semibold text-pink-700 dark:text-pink-200 flex items-center gap-2">
            <svg class="w-6 h-6 text-pink-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none"/>
              <text x="12" y="16" text-anchor="middle" font-size="10" fill="currentColor">{{ mesa.mesaId }}</text>
            </svg>
            Mesa #{{ mesa.mesaId }}
          </h3>
          <button (click)="marcarTodosComoServido(mesa.mesaId)"
            class="flex items-center gap-2 px-4 py-2 bg-pink-600 hover:bg-pink-700 text-white text-sm font-semibold rounded-lg shadow transition focus:outline-none focus:ring-2 focus:ring-pink-300">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
            </svg>
            Marcar todos como servidos
          </button>
        </div>

        <ul class="divide-y divide-pink-100 dark:divide-pink-900">
          <li *ngFor="let plato of mesa.platos; let i = index"
            class="flex justify-between items-center py-3">
            <div class="flex items-center gap-3">
              <svg class="w-6 h-6 text-yellow-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 8c-1.657 0-3 1.343-3 3 0 1.657 1.343 3 3 3s3-1.343 3-3c0-1.657-1.343-3-3-3zm0 0V4m0 10v4" />
              </svg>
              <span class="text-gray-800 dark:text-gray-100 font-medium">
                {{ plato.nombre }}
                <span class="text-xs text-gray-500 ml-2">({{ plato.hora }})</span>
              </span>
            </div>
            <button (click)="enviarAPreparado(mesa.mesaId, plato.originalIndex)"
              class="flex items-center gap-1 px-3 py-1 bg-green-500 hover:bg-green-600 text-white text-sm font-medium rounded-lg shadow focus:outline-none focus:ring-2 focus:ring-green-300"
              [attr.aria-label]="'Marcar ' + plato.nombre + ' como preparado'">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
              </svg>
              Preparado
            </button>
          </li>
        </ul>
      </section>
    </ng-container>
  </div>
</div>