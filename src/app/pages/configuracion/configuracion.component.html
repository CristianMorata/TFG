<div *ngIf="!noEsAdmin()">
    <div *ngIf="cargando">Cargando configuración...</div>
    <div *ngIf="error" style="color: red;">{{ error }}</div>

    <div *ngIf="!cargando && !error"
        class="p-4 bg-white dark:bg-gray-800 rounded-lg shadow-md transition-all duration-300">
        <h1 class="text-2xl font-bold mb-4">Servicios permitidios</h1>

        <label for="servicioCamarero">Servicio camarero</label>
        <input id="servicioCamarero" type="checkbox" [(ngModel)]="servicioCamarero" (change)="onChange()" />
        <br />
        <label for="servicioCliente">Servicio cliente</label>
        <input id="servicioCliente" type="checkbox" [(ngModel)]="servicioCliente" (change)="onChange()" />
    </div>

    <!-- Categorías -->
    <div class="mt-6 p-4 bg-white dark:bg-gray-800 rounded-lg shadow-md">
        <h2 class="text-xl font-semibold mb-3">Categorías</h2>
        <ul class="mb-3">
            <li *ngFor="let nombre of getCategoriasKeys()" class="flex justify-between items-center py-1">
                <span>{{ nombre }} - <strong>{{ categorias[nombre].destino }}</strong></span>
                <button class="text-blue-600 hover:underline" (click)="abrirPopup(nombre)">Modificar</button>
            </li>
        </ul>
        <button class="px-3 py-1 bg-green-600 text-white rounded" (click)="abrirPopup()">Añadir nueva</button>
    </div>

    <!-- Popup -->
    <div *ngIf="mostrarPopup"
        class="fixed inset-0 z-50 backdrop-blur-sm backdrop-brightness-75 flex items-center justify-center">
        <div class="bg-white p-6 rounded-lg shadow-lg w-full max-w-md relative">
            <h3 class="text-xl font-semibold mb-4">{{ modoEdicion ? 'Modificar' : 'Añadir' }} Categoría</h3>

            <label class="block mb-2">
                Nombre:
                <input [(ngModel)]="nombreCategoria" [readonly]="modoEdicion" class="w-full p-2 border rounded" />
            </label>

            <label class="block mb-2">
                <input type="radio" name="destino" [(ngModel)]="destino" value="cocina" />
                Cocina
            </label>
            <label class="block mb-4">
                <input type="radio" name="destino" [(ngModel)]="destino" value="barra" />
                Barra
            </label>

            <div class="flex justify-end gap-2">
                <button class="px-4 py-2 bg-gray-300 rounded" (click)="cerrarPopup()">Cancelar</button>
                <button class="px-4 py-2 bg-blue-600 text-white rounded" (click)="guardarCategoria()">
                    {{ modoEdicion ? 'Guardar cambios' : 'Añadir' }}
                </button>
            </div>
        </div>
    </div>
</div>