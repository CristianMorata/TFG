<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Gestión de Productos</title>
</head>
<body>
  <h1>Pruebas de producto-venta</h1>

  <section>
    <h2>Agregar producto</h2>
    <button onclick="agregarProducto()">Agregar</button>
  </section>

  <section>
    <h2>Listar productos</h2>
    <button onclick="listarProductos()">Listar</button>
    <pre id="listaProductos"></pre>
  </section>

  <section>
    <h2>Modificar producto</h2>
    <button onclick="modificarProducto()">Modificar</button>
  </section>

  <section>
    <h2>Eliminar producto</h2>
    <button onclick="eliminarProducto()">Eliminar</button>
  </section>

  <script>
    const BASE_URL = "https://";

    const urls = {
      agregar: "https://agregarproductoventa-rs2gjhs4iq-uc.a.run.app",
      listar: "https://listarproductosventa-rs2gjhs4iq-uc.a.run.app",
      modificar: "https://modificarproductoventa-rs2gjhs4iq-uc.a.run.app",
      eliminar: "https://eliminarproductoventa-rs2gjhs4iq-uc.a.run.app"
    };

    async function agregarProducto() {
      const body = {
        nombre: "Café cortado",
        // descripcion: "Café con un poco de leche",
        precio: 1.5,
        categoria: "bebidas",
        alergenos: ["lácteos"],
        // visible: true,
        novedad: true,
        tipo_comida: "", // vacía ya que no es "comida"
        anotaciones: "Servir caliente"
      };

      const res = await fetch(urls.agregar, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(body)
      });

      const data = await res.json();
      console.log("Producto agregado:", data);
      alert(JSON.stringify(data, null, 2));
    }

    async function listarProductos() {
      const res = await fetch(urls.listar);
      const data = await res.json();
      document.getElementById("listaProductos").textContent = JSON.stringify(data, null, 2);
    }

    async function modificarProducto() {
      const body = {
        id: "1", // Cambia este ID a uno real existente
        categoria: "bebidas",
        nombre: "Café cortado doble",
        precio: 1.8,
        novedad: false,
        anotaciones: "Ahora con más café"
      };

      const res = await fetch(urls.modificar, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(body)
      });

      const data = await res.json();
      console.log("Producto modificado:", data);
      alert(JSON.stringify(data, null, 2));
    }

    async function eliminarProducto() {
      const body = {
        id: "1", // Cambia este ID a uno real existente
        categoria: "bebidas"
      };

      const res = await fetch(urls.eliminar, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(body)
      });

      const data = await res.json();
      console.log("Producto eliminado:", data);
      alert(JSON.stringify(data, null, 2));
    }
  </script>
</body>
</html>
